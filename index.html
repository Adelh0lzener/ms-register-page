<body>
  <!-- Azure AD B2C UI‑Container -->
  <div id="api"></div>

  <!-- Dein Script zum Nachladen der Vereinsliste -->
  <script>
    async function loadTeams() {
      const urls = [
        'data/liga1stadium.json',
        'data/liga2stadium.json',
        'data/liga3stadium.json'
      ];
      const allTeams = new Set();

      for (const url of urls) {
        try {
          const res = await fetch(url);
          const data = await res.json();
          data.forEach(item => allTeams.add(item.team.name));
        } catch (e) {
          console.error(`Fehler beim Laden von ${url}:`, e);
        }
      }

      // Warte darauf, dass B2C das <select id="team"> einfügt
      const interval = setInterval(() => {
        const select = document.getElementById('team');
        if (!select) return;
        clearInterval(interval);

        // Vereinsnamen alphabetisch sortiert einfügen
        [...allTeams].sort().forEach(name => {
          const option = document.createElement('option');
          option.value = name;
          option.textContent = name;
          select.appendChild(option);
        });
      }, 500);
    }

    document.addEventListener('DOMContentLoaded', loadTeams);
  </script>

  <!-- Azure AD B2C „combined.js“: injiziert das Registrierungs‑Formular in <div id="api"> -->
  <script src="https://1860131218601312.b2clogin.com/1860131218601312.onmicrosoft.com/B2C_1_signup_or_signin/api/combined.js"></script>
</body>
