<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Registrierung</title>
  <!-- Dein CSS auf GitHub Pages -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- 1) Leer-Container für Azure AD B2C UI -->
  <div id="api"></div>

  <!-- 2) Dein Script zum Nachladen der Vereinsliste -->
  <script>
    async function loadTeams() {
      const urls = [
        'data/liga1stadium.json',
        'data/liga2stadium.json',
        'data/liga3stadium.json'
      ];
      const allTeams = new Set();

      for (const url of urls) {
        try {
          const res = await fetch(url);
          const data = await res.json();
          data.forEach(item => allTeams.add(item.team.name));
        } catch (e) {
          console.error(`Fehler beim Laden von ${url}:`, e);
        }
      }

      // Wiederholt prüfen, bis B2C das <select id="team"> erzeugt hat
      const interval = setInterval(() => {
        const select = document.getElementById('team');
        if (!select) return;
        clearInterval(interval);

        [...allTeams].sort().forEach(name => {
          const option = document.createElement('option');
          option.value = name;
          option.textContent = name;
          select.appendChild(option);
        });
      }, 500);
    }

    document.addEventListener('DOMContentLoaded', loadTeams);
  </script>

  <!-- 3) Azure AD B2C combined.js: ersetzt den <div id="api"> durch das Login-/Signup‑Form -->
  <script src="https://1860131218601312.b2clogin.com/1860131218601312.onmicrosoft.com/B2C_1_signup_or_signin/api/combined.js"></script>
</body>
</html>
