<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Registrierung via Azure B2C</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Azure AD B2C ersetzt diesen Container mit dem echten Formular -->
  <div id="api"></div>

  <!-- Dein Script zum Nachladen der Vereinsliste -->
  <script>
    async function loadTeams() {
      const urls = [
        'data/liga1stadium.json',
        'data/liga2stadium.json',
        'data/liga3stadium.json'
      ];
      const allTeams = new Set();

      for (const url of urls) {
        try {
          const res = await fetch(url);
          const data = await res.json();
          data.forEach(item => allTeams.add(item.team.name));
        } catch (e) {
          console.error(`Fehler beim Laden von ${url}:`, e);
        }
      }

      const interval = setInterval(() => {
        const select = document.getElementById('team');
        if (!select) return;
        clearInterval(interval);
        [...allTeams].sort().forEach(name => {
          const opt = document.createElement('option');
          opt.value = name;
          opt.textContent = name;
          select.appendChild(opt);
        });
      }, 500);
    }

    document.addEventListener('DOMContentLoaded', loadTeams);
  </script>

  <!-- Azure AD B2C combined.js: baut das UI in #api ein -->
  <script
    src="https://1860131218601312.b2clogin.com/1860131218601312.onmicrosoft.com/B2C_1_signup_or_signin/api/combined.js">
  </script>
</body>
</html>
